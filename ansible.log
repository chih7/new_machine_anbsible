2019-01-29 20:04:02,428 p=13970 u=chih |  ERROR! Syntax Error while loading YAML.
  found unacceptable key (unhashable type: 'AnsibleMapping')

The error appears to have been in '/home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml': line 53, column 17, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  become: yes
  become_user: {{ user_name }}
                ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes.  Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2019-01-29 20:04:52,847 p=14504 u=chih |   ________________________ 
< PLAY [Set New Machine] >
 ------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:04:52,888 p=14504 u=chih |   ______________________________________________ 
< TASK [base_packages : install base packages] >
 ---------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:04:57,468 p=14504 u=chih |  fatal: [ro.chih.me]: UNREACHABLE! => {"changed": false, "msg": "SSH Error: data could not be sent to remote host \"ro.chih.me\". Make sure this host can be reached over ssh", "unreachable": true}
2019-01-29 20:04:57,474 p=14504 u=chih |  	to retry, use: --limit @/tmp/new_machine.retry

2019-01-29 20:04:57,509 p=14504 u=chih |   ____________ 
< PLAY RECAP >
 ------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:04:57,510 p=14504 u=chih |  ro.chih.me                 : ok=0    changed=0    unreachable=1    failed=0   
2019-01-29 20:08:36,689 p=16816 u=chih |   ________________________ 
< PLAY [Set New Machine] >
 ------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:08:36,738 p=16816 u=chih |   ______________________________________________ 
< TASK [base_packages : install base packages] >
 ---------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:08:50,584 p=16816 u=chih |  ok: [ro.chih.me]
2019-01-29 20:08:50,630 p=16816 u=chih |   ________________________________________ 
< TASK [new_user : Create user group(s)] >
 ---------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:08:50,677 p=16816 u=chih |   _______________________________ 
< TASK [new_user : Create user] >
 ------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:08:53,552 p=16816 u=chih |  changed: [ro.chih.me]
2019-01-29 20:08:53,623 p=16816 u=chih |   ____________________________________________________________ 
/ TASK [new_user : Set authorized_key to allow SSH key based \
\ logins]                                                    /
 ------------------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:08:55,761 p=16816 u=chih |  changed: [ro.chih.me]
2019-01-29 20:08:55,798 p=16816 u=chih |   __________________________________________________________ 
< TASK [new_user : Enable including files from sudoers.d/] >
 ---------------------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:08:59,045 p=16816 u=chih |  ok: [ro.chih.me]
2019-01-29 20:08:59,081 p=16816 u=chih |   _____________________________________ 
< TASK [new_user : Disable sudoers.d] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:08:59,101 p=16816 u=chih |  skipping: [ro.chih.me]
2019-01-29 20:08:59,144 p=16816 u=chih |   ____________________________________________ 
< TASK [new_user : Enable passwordless sudo] >
 -------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:09:16,679 p=16816 u=chih |  changed: [ro.chih.me]
2019-01-29 20:09:16,764 p=16816 u=chih |   ________________________________________________ 
< TASK [new_user : Backing up existing ~/.zshrc] >
 ------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:09:16,783 p=16816 u=chih |  [DEPRECATION WARNING]: Using tests as filters is deprecated. Instead of using `result|success` use `result is success`. 
This feature will be removed in version 2.9. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2019-01-29 20:09:16,788 p=16816 u=chih |  fatal: [ro.chih.me]: FAILED! => {"msg": "The conditional check 'installation|success' failed. The error was: The 'failed' test expects a dictionary\n\nThe error appears to have been in '/home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml': line 49, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Backing up existing ~/.zshrc\n  ^ here\n"}
2019-01-29 20:09:16,792 p=16816 u=chih |  	to retry, use: --limit @/tmp/new_machine.retry

2019-01-29 20:09:16,829 p=16816 u=chih |   ____________ 
< PLAY RECAP >
 ------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:09:16,830 p=16816 u=chih |  ro.chih.me                 : ok=5    changed=3    unreachable=0    failed=1   
2019-01-29 20:12:15,669 p=19088 u=chih |   ________________________ 
< PLAY [Set New Machine] >
 ------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:15,718 p=19088 u=chih |   ______________________________________________ 
< TASK [base_packages : install base packages] >
 ---------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:27,325 p=19088 u=chih |  ok: [ro.chih.me]
2019-01-29 20:12:27,374 p=19088 u=chih |   ________________________________________ 
< TASK [new_user : Create user group(s)] >
 ---------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:27,424 p=19088 u=chih |   _______________________________ 
< TASK [new_user : Create user] >
 ------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:29,848 p=19088 u=chih |  ok: [ro.chih.me]
2019-01-29 20:12:29,898 p=19088 u=chih |   ____________________________________________________________ 
/ TASK [new_user : Set authorized_key to allow SSH key based \
\ logins]                                                    /
 ------------------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:32,011 p=19088 u=chih |  ok: [ro.chih.me]
2019-01-29 20:12:32,044 p=19088 u=chih |   __________________________________________________________ 
< TASK [new_user : Enable including files from sudoers.d/] >
 ---------------------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:34,723 p=19088 u=chih |  ok: [ro.chih.me]
2019-01-29 20:12:34,805 p=19088 u=chih |   _____________________________________ 
< TASK [new_user : Disable sudoers.d] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:34,831 p=19088 u=chih |  skipping: [ro.chih.me]
2019-01-29 20:12:34,877 p=19088 u=chih |   ____________________________________________ 
< TASK [new_user : Enable passwordless sudo] >
 -------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:43,778 p=19088 u=chih |  ok: [ro.chih.me]
2019-01-29 20:12:43,815 p=19088 u=chih |   ________________________________________________ 
< TASK [new_user : Backing up existing ~/.zshrc] >
 ------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:43,830 p=19088 u=chih |  [DEPRECATION WARNING]: Using tests as filters is deprecated. Instead of using `result|success` use `result is success`. 
This feature will be removed in version 2.9. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2019-01-29 20:12:46,805 p=19088 u=chih |   [WARNING]: Module remote_tmp /home/chih/.ansible/tmp did not exist and was created with a mode of 0700, this may cause
issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions manually

2019-01-29 20:12:46,805 p=19088 u=chih |  changed: [ro.chih.me]
2019-01-29 20:12:46,838 p=19088 u=chih |   _____________________________________ 
< TASK [new_user : Cloning oh-my-zsh] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:46,854 p=19088 u=chih |  [DEPRECATION WARNING]: Using tests as filters is deprecated. Instead of using `result|success` use `result is success`. 
This feature will be removed in version 2.9. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2019-01-29 20:12:52,895 p=19088 u=chih |  changed: [ro.chih.me]
2019-01-29 20:12:52,944 p=19088 u=chih |   _________________________________________ 
< TASK [new_user : Creating new ~/.zshrc] >
 ----------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:52,963 p=19088 u=chih |  [DEPRECATION WARNING]: Using tests as filters is deprecated. Instead of using `result|success` use `result is success`. 
This feature will be removed in version 2.9. Deprecation warnings can be disabled by setting deprecation_warnings=False 
in ansible.cfg.
2019-01-29 20:12:56,160 p=19088 u=chih |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2019-01-29 20:12:56,163 p=19088 u=chih |  fatal: [ro.chih.me]: FAILED! => {"changed": false, "msg": "Could not find or access '~/.oh-my-zsh/templates/zshrc.zsh-template' on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2019-01-29 20:12:56,167 p=19088 u=chih |  	to retry, use: --limit @/tmp/new_machine.retry

2019-01-29 20:12:56,220 p=19088 u=chih |   ____________ 
< PLAY RECAP >
 ------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:12:56,222 p=19088 u=chih |  ro.chih.me                 : ok=7    changed=2    unreachable=0    failed=1   
2019-01-29 20:15:28,956 p=21030 u=chih |  ansible-playbook 2.7.6
  config file = /home/chih/Documents/new_machine_anbsible/ansible.cfg
  configured module search path = ['/home/chih/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.7.2 (default, Jan 10 2019, 23:51:51) [GCC 8.2.1 20181127]
2019-01-29 20:15:28,956 p=21030 u=chih |  Using /home/chih/Documents/new_machine_anbsible/ansible.cfg as config file
2019-01-29 20:15:28,969 p=21030 u=chih |  /home/chih/Documents/new_machine_anbsible/envs/ro/hosts did not meet host_list requirements, check plugin documentation if this is unexpected
2019-01-29 20:15:28,969 p=21030 u=chih |  /home/chih/Documents/new_machine_anbsible/envs/ro/hosts did not meet script requirements, check plugin documentation if this is unexpected
2019-01-29 20:15:28,972 p=21030 u=chih |  Parsed /home/chih/Documents/new_machine_anbsible/envs/ro/hosts inventory source with ini plugin
2019-01-29 20:15:29,324 p=21030 u=chih |   ____________________________ 
< PLAYBOOK: new_machine.yaml >
 ---------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:29,324 p=21030 u=chih |  1 plays in ./playbooks/new_machine.yaml
2019-01-29 20:15:29,388 p=21030 u=chih |   ________________________ 
< PLAY [Set New Machine] >
 ------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:29,395 p=21030 u=chih |  META: ran handlers
2019-01-29 20:15:29,436 p=21030 u=chih |   ______________________________________________ 
< TASK [base_packages : install base packages] >
 ---------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:29,437 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/base_packages/tasks/main.yaml:2
2019-01-29 20:15:29,771 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/setup.py
2019-01-29 20:15:37,891 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/packaging/os/yum.py
2019-01-29 20:15:40,542 p=21030 u=chih |  ok: [ro.chih.me] => {
    "ansible_facts": {
        "pkg_mgr": "yum"
    },
    "changed": false,
    "invocation": {
        "module_args": {
            "allow_downgrade": false,
            "autoremove": false,
            "bugfix": false,
            "conf_file": null,
            "disable_excludes": null,
            "disable_gpg_check": false,
            "disable_plugin": [],
            "disablerepo": [],
            "download_only": false,
            "enable_plugin": [],
            "enablerepo": [],
            "exclude": [],
            "install_repoquery": true,
            "installroot": "/",
            "list": null,
            "name": [
                "zsh",
                "vim",
                "git",
                "sudo"
            ],
            "releasever": null,
            "security": false,
            "skip_broken": false,
            "state": "present",
            "update_cache": false,
            "update_only": false,
            "use_backend": "auto",
            "validate_certs": true
        }
    },
    "msg": "",
    "rc": 0,
    "results": [
        "zsh-5.0.2-31.el7.x86_64 providing zsh is already installed",
        "2:vim-enhanced-7.4.160-5.el7.x86_64 providing vim is already installed",
        "git-1.8.3.1-20.el7.x86_64 providing git is already installed",
        "sudo-1.8.23-3.el7.x86_64 providing sudo is already installed"
    ]
}
2019-01-29 20:15:40,584 p=21030 u=chih |   ________________________________________ 
< TASK [new_user : Create user group(s)] >
 ---------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:40,585 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:3
2019-01-29 20:15:40,648 p=21030 u=chih |   _______________________________ 
< TASK [new_user : Create user] >
 ------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:40,649 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:9
2019-01-29 20:15:40,850 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/user.py
2019-01-29 20:15:43,172 p=21030 u=chih |  ok: [ro.chih.me] => {
    "append": false,
    "changed": false,
    "comment": "",
    "group": 1001,
    "groups": "",
    "home": "/home/chih",
    "invocation": {
        "module_args": {
            "append": false,
            "comment": null,
            "create_home": true,
            "expires": null,
            "force": false,
            "generate_ssh_key": true,
            "group": null,
            "groups": [
                ""
            ],
            "hidden": null,
            "home": null,
            "local": null,
            "login_class": null,
            "move_home": false,
            "name": "chih",
            "non_unique": false,
            "password": null,
            "password_lock": null,
            "remove": false,
            "seuser": null,
            "shell": "/bin/zsh",
            "skeleton": null,
            "ssh_key_bits": 0,
            "ssh_key_comment": "ansible-generated on ro.chih.me",
            "ssh_key_file": null,
            "ssh_key_passphrase": null,
            "ssh_key_type": "rsa",
            "state": "present",
            "system": false,
            "uid": null,
            "update_password": "always"
        }
    },
    "move_home": false,
    "name": "chih",
    "shell": "/bin/zsh",
    "ssh_fingerprint": "2048 SHA256:iB9yVlhdznBMmgtAlO3Z5+nJ8pV61ypdfN5CB32lHgY ansible-generated on ro.chih.me (RSA)",
    "ssh_key_file": "/home/chih/.ssh/id_rsa",
    "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDDuuW7C9eXcgP9pbCgo85+yzl0UI5jeh79ywB0rzy+tf4Aq7nJDzXCiqb4HyzP+sc/toDu8sGv2nIVK90VHQXYXbLNXcih8S/bwgghrWmjscuNd7yJaFEDPG1pEeQM/XZ+vV2qpCzHRO4bl6nvRW96I77ZAm6Cd46fYrh60gLkAKTFmJhuqgaLTDp/JrbBqIvZAlCt1oNtSzzWV9xnqmLaRPVWuBHghxTvMl45Lelf3m9zTO60bKJEycZHtBqaBWAxU15RJBQhuCdJ1oYSYSJrWFnVSb9W1u5GtyvXcDMeYAUtAV344q74PvDZTLiZd7bgd65HEmTTm0p/ATA8+6gT ansible-generated on ro.chih.me",
    "state": "present",
    "uid": 1001
}
2019-01-29 20:15:43,218 p=21030 u=chih |   ____________________________________________________________ 
/ TASK [new_user : Set authorized_key to allow SSH key based \
\ logins]                                                    /
 ------------------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:43,220 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:16
2019-01-29 20:15:43,432 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/authorized_key.py
2019-01-29 20:15:45,461 p=21030 u=chih |  ok: [ro.chih.me] => {
    "changed": false,
    "comment": null,
    "exclusive": false,
    "follow": false,
    "invocation": {
        "module_args": {
            "comment": null,
            "exclusive": false,
            "follow": false,
            "key": "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvALPGv9Xdn2Tmi60DMcq1ACiLSYLQ6zfTHIM2x9k23IVVjTBBNEFfpcmxJBqaisojK89dK/GmQZ6qnKFKaI9DOvasI0aMLGc4gfeGE6HKcggq2DE3a6u9+qxuKsv86CexGzoJ6x9HIvCfCvm8Ru+U/ogJcOKWLtxW8kfBEcrydmsBUxVBR9TMTFKQS1JAHcmRrdYRPM3uolGkPXhpNzs47WHHfSg2NqXmMTsTEP5dkp4BikSPfhHsqjPqBuoBoRke+cdwxieZJGL+WgfE2pQYvtbFYfWWiZ11evKrug4EfiPl5pFotFUXX72Gk0CXHBjmUNhtNO4aU/oCKQ75ve0yw== qijiaxin758@gmail.com",
            "key_options": null,
            "keyfile": "/home/chih/.ssh/authorized_keys",
            "manage_dir": true,
            "path": null,
            "state": "present",
            "unique": false,
            "user": "chih",
            "validate_certs": true
        }
    },
    "key": "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvALPGv9Xdn2Tmi60DMcq1ACiLSYLQ6zfTHIM2x9k23IVVjTBBNEFfpcmxJBqaisojK89dK/GmQZ6qnKFKaI9DOvasI0aMLGc4gfeGE6HKcggq2DE3a6u9+qxuKsv86CexGzoJ6x9HIvCfCvm8Ru+U/ogJcOKWLtxW8kfBEcrydmsBUxVBR9TMTFKQS1JAHcmRrdYRPM3uolGkPXhpNzs47WHHfSg2NqXmMTsTEP5dkp4BikSPfhHsqjPqBuoBoRke+cdwxieZJGL+WgfE2pQYvtbFYfWWiZ11evKrug4EfiPl5pFotFUXX72Gk0CXHBjmUNhtNO4aU/oCKQ75ve0yw== qijiaxin758@gmail.com",
    "key_options": null,
    "keyfile": "/home/chih/.ssh/authorized_keys",
    "manage_dir": true,
    "path": null,
    "state": "present",
    "unique": false,
    "user": "chih",
    "validate_certs": true
}
2019-01-29 20:15:45,506 p=21030 u=chih |   __________________________________________________________ 
< TASK [new_user : Enable including files from sudoers.d/] >
 ---------------------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:45,508 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:22
2019-01-29 20:15:45,685 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/lineinfile.py
2019-01-29 20:15:47,945 p=21030 u=chih |  ok: [ro.chih.me] => {
    "backup": "",
    "changed": false,
    "diff": [
        {
            "after": "",
            "after_header": "/etc/sudoers (content)",
            "before": "",
            "before_header": "/etc/sudoers (content)"
        },
        {
            "after_header": "/etc/sudoers (file attributes)",
            "before_header": "/etc/sudoers (file attributes)"
        }
    ],
    "invocation": {
        "module_args": {
            "attributes": null,
            "backrefs": false,
            "backup": true,
            "content": null,
            "create": false,
            "delimiter": null,
            "directory_mode": null,
            "firstmatch": false,
            "follow": false,
            "force": null,
            "group": null,
            "insertafter": null,
            "insertbefore": null,
            "line": "#includedir /etc/sudoers.d",
            "mode": null,
            "owner": null,
            "path": "/etc/sudoers",
            "regexp": "^#includedir /etc/sudoers.d",
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": null,
            "state": "present",
            "unsafe_writes": null,
            "validate": null
        }
    },
    "msg": ""
}
2019-01-29 20:15:47,996 p=21030 u=chih |   _____________________________________ 
< TASK [new_user : Disable sudoers.d] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:47,997 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:31
2019-01-29 20:15:48,038 p=21030 u=chih |  skipping: [ro.chih.me] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
2019-01-29 20:15:48,115 p=21030 u=chih |   ____________________________________________ 
< TASK [new_user : Enable passwordless sudo] >
 -------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:48,116 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:40
2019-01-29 20:15:51,515 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/stat.py
2019-01-29 20:15:54,545 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/file.py
2019-01-29 20:15:58,101 p=21030 u=chih |  ok: [ro.chih.me] => {
    "changed": false,
    "checksum": "a72c95ff39a70dcc03be78c59e93bcd97273dce1",
    "dest": "/etc/sudoers.d/chih",
    "diff": {
        "after": {
            "path": "/etc/sudoers.d/chih"
        },
        "before": {
            "path": "/etc/sudoers.d/chih"
        }
    },
    "gid": 0,
    "group": "root",
    "invocation": {
        "module_args": {
            "_diff_peek": null,
            "_original_basename": "tmpm_5bt76_",
            "access_time": null,
            "access_time_format": "%Y%m%d%H%M.%S",
            "attributes": null,
            "backup": null,
            "content": null,
            "delimiter": null,
            "dest": "/etc/sudoers.d/chih",
            "directory_mode": null,
            "follow": true,
            "force": false,
            "group": "root",
            "mode": "0440",
            "modification_time": null,
            "modification_time_format": "%Y%m%d%H%M.%S",
            "owner": "root",
            "path": "/etc/sudoers.d/chih",
            "recurse": false,
            "regexp": null,
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": null,
            "state": "file",
            "unsafe_writes": null
        }
    },
    "mode": "0440",
    "owner": "root",
    "path": "/etc/sudoers.d/chih",
    "size": 28,
    "state": "file",
    "uid": 0
}
2019-01-29 20:15:58,138 p=21030 u=chih |   ________________________________________________ 
< TASK [new_user : Backing up existing ~/.zshrc] >
 ------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:15:58,138 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:49
2019-01-29 20:15:58,293 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/commands/command.py
2019-01-29 20:15:59,758 p=21030 u=chih |  Escalation succeeded
2019-01-29 20:16:00,826 p=21030 u=chih |  changed: [ro.chih.me] => {
    "changed": true,
    "cmd": "if [ -f ~/.zshrc ]; then mv ~/.zshrc{,.orig}; fi",
    "delta": "0:00:00.002720",
    "end": "2019-01-29 12:16:00.392078",
    "invocation": {
        "module_args": {
            "_raw_params": "if [ -f ~/.zshrc ]; then mv ~/.zshrc{,.orig}; fi",
            "_uses_shell": true,
            "argv": null,
            "chdir": null,
            "creates": null,
            "executable": null,
            "removes": null,
            "stdin": null,
            "warn": true
        }
    },
    "rc": 0,
    "start": "2019-01-29 12:16:00.389358",
    "stderr": "",
    "stderr_lines": [],
    "stdout": "",
    "stdout_lines": []
}
2019-01-29 20:16:00,865 p=21030 u=chih |   _____________________________________ 
< TASK [new_user : Cloning oh-my-zsh] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:16:00,866 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:55
2019-01-29 20:16:01,064 p=21030 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/source_control/git.py
2019-01-29 20:16:03,182 p=21030 u=chih |  Escalation succeeded
2019-01-29 20:16:08,630 p=21030 u=chih |  ok: [ro.chih.me] => {
    "after": "ea6ec09b9c7752ee0e074659ca0689d0af053e5a",
    "before": "ea6ec09b9c7752ee0e074659ca0689d0af053e5a",
    "changed": false,
    "invocation": {
        "module_args": {
            "accept_hostkey": false,
            "archive": null,
            "bare": false,
            "clone": true,
            "depth": null,
            "dest": "/home/chih/.oh-my-zsh",
            "executable": null,
            "force": false,
            "key_file": null,
            "recursive": true,
            "reference": null,
            "refspec": null,
            "remote": "origin",
            "repo": "https://github.com/robbyrussell/oh-my-zsh",
            "separate_git_dir": null,
            "ssh_opts": null,
            "track_submodules": false,
            "umask": null,
            "update": true,
            "verify_commit": false,
            "version": "HEAD"
        }
    },
    "remote_url_changed": false
}
2019-01-29 20:16:08,672 p=21030 u=chih |   _________________________________________ 
< TASK [new_user : Creating new ~/.zshrc] >
 ----------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:16:08,672 p=21030 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:64
2019-01-29 20:16:12,049 p=21030 u=chih |  The full traceback is:
Traceback (most recent call last):
  File "/usr/lib/python3.7/site-packages/ansible/plugins/action/copy.py", line 457, in run
    source = self._find_needle('files', source)
  File "/usr/lib/python3.7/site-packages/ansible/plugins/action/__init__.py", line 1065, in _find_needle
    return self._loader.path_dwim_relative_stack(path_stack, dirname, needle)
  File "/usr/lib/python3.7/site-packages/ansible/parsing/dataloader.py", line 322, in path_dwim_relative_stack
    raise AnsibleFileNotFound(file_name=source, paths=[to_text(p) for p in search])
ansible.errors.AnsibleFileNotFound: Could not find or access '~/.oh-my-zsh/templates/zshrc.zsh-template' on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option

2019-01-29 20:16:12,052 p=21030 u=chih |  fatal: [ro.chih.me]: FAILED! => {
    "changed": false,
    "invocation": {
        "dest": "~/.zshrc",
        "src": "~/.oh-my-zsh/templates/zshrc.zsh-template"
    },
    "msg": "Could not find or access '~/.oh-my-zsh/templates/zshrc.zsh-template' on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"
}
2019-01-29 20:16:12,077 p=21030 u=chih |  	to retry, use: --limit @/tmp/new_machine.retry

2019-01-29 20:16:12,145 p=21030 u=chih |   ____________ 
< PLAY RECAP >
 ------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:16:12,146 p=21030 u=chih |  ro.chih.me                 : ok=7    changed=1    unreachable=0    failed=1   
2019-01-29 20:20:51,826 p=24562 u=chih |  ansible-playbook 2.7.6
  config file = /home/chih/Documents/new_machine_anbsible/ansible.cfg
  configured module search path = ['/home/chih/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.7.2 (default, Jan 10 2019, 23:51:51) [GCC 8.2.1 20181127]
2019-01-29 20:20:51,826 p=24562 u=chih |  Using /home/chih/Documents/new_machine_anbsible/ansible.cfg as config file
2019-01-29 20:20:51,841 p=24562 u=chih |  /home/chih/Documents/new_machine_anbsible/envs/ro/hosts did not meet host_list requirements, check plugin documentation if this is unexpected
2019-01-29 20:20:51,841 p=24562 u=chih |  /home/chih/Documents/new_machine_anbsible/envs/ro/hosts did not meet script requirements, check plugin documentation if this is unexpected
2019-01-29 20:20:51,846 p=24562 u=chih |  Parsed /home/chih/Documents/new_machine_anbsible/envs/ro/hosts inventory source with ini plugin
2019-01-29 20:20:52,141 p=24562 u=chih |   ____________________________ 
< PLAYBOOK: new_machine.yaml >
 ---------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:20:52,141 p=24562 u=chih |  1 plays in ./playbooks/new_machine.yaml
2019-01-29 20:20:52,193 p=24562 u=chih |   ________________________ 
< PLAY [Set New Machine] >
 ------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:20:52,202 p=24562 u=chih |  META: ran handlers
2019-01-29 20:20:52,251 p=24562 u=chih |   ______________________________________________ 
< TASK [base_packages : install base packages] >
 ---------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:20:52,252 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/base_packages/tasks/main.yaml:2
2019-01-29 20:20:52,563 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/setup.py
2019-01-29 20:21:01,445 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/packaging/os/yum.py
2019-01-29 20:21:05,284 p=24562 u=chih |  ok: [ro.chih.me] => {
    "ansible_facts": {
        "pkg_mgr": "yum"
    },
    "changed": false,
    "invocation": {
        "module_args": {
            "allow_downgrade": false,
            "autoremove": false,
            "bugfix": false,
            "conf_file": null,
            "disable_excludes": null,
            "disable_gpg_check": false,
            "disable_plugin": [],
            "disablerepo": [],
            "download_only": false,
            "enable_plugin": [],
            "enablerepo": [],
            "exclude": [],
            "install_repoquery": true,
            "installroot": "/",
            "list": null,
            "name": [
                "zsh",
                "vim",
                "git",
                "sudo"
            ],
            "releasever": null,
            "security": false,
            "skip_broken": false,
            "state": "present",
            "update_cache": false,
            "update_only": false,
            "use_backend": "auto",
            "validate_certs": true
        }
    },
    "msg": "",
    "rc": 0,
    "results": [
        "zsh-5.0.2-31.el7.x86_64 providing zsh is already installed",
        "2:vim-enhanced-7.4.160-5.el7.x86_64 providing vim is already installed",
        "git-1.8.3.1-20.el7.x86_64 providing git is already installed",
        "sudo-1.8.23-3.el7.x86_64 providing sudo is already installed"
    ]
}
2019-01-29 20:21:05,338 p=24562 u=chih |   ________________________________________ 
< TASK [new_user : Create user group(s)] >
 ---------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:05,339 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:3
2019-01-29 20:21:05,385 p=24562 u=chih |   _______________________________ 
< TASK [new_user : Create user] >
 ------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:05,385 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:9
2019-01-29 20:21:05,566 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/user.py
2019-01-29 20:21:07,689 p=24562 u=chih |  ok: [ro.chih.me] => {
    "append": false,
    "changed": false,
    "comment": "",
    "group": 1001,
    "groups": "",
    "home": "/home/chih",
    "invocation": {
        "module_args": {
            "append": false,
            "comment": null,
            "create_home": true,
            "expires": null,
            "force": false,
            "generate_ssh_key": true,
            "group": null,
            "groups": [
                ""
            ],
            "hidden": null,
            "home": null,
            "local": null,
            "login_class": null,
            "move_home": false,
            "name": "chih",
            "non_unique": false,
            "password": null,
            "password_lock": null,
            "remove": false,
            "seuser": null,
            "shell": "/bin/zsh",
            "skeleton": null,
            "ssh_key_bits": 0,
            "ssh_key_comment": "ansible-generated on ro.chih.me",
            "ssh_key_file": null,
            "ssh_key_passphrase": null,
            "ssh_key_type": "rsa",
            "state": "present",
            "system": false,
            "uid": null,
            "update_password": "always"
        }
    },
    "move_home": false,
    "name": "chih",
    "shell": "/bin/zsh",
    "ssh_fingerprint": "2048 SHA256:iB9yVlhdznBMmgtAlO3Z5+nJ8pV61ypdfN5CB32lHgY ansible-generated on ro.chih.me (RSA)",
    "ssh_key_file": "/home/chih/.ssh/id_rsa",
    "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDDuuW7C9eXcgP9pbCgo85+yzl0UI5jeh79ywB0rzy+tf4Aq7nJDzXCiqb4HyzP+sc/toDu8sGv2nIVK90VHQXYXbLNXcih8S/bwgghrWmjscuNd7yJaFEDPG1pEeQM/XZ+vV2qpCzHRO4bl6nvRW96I77ZAm6Cd46fYrh60gLkAKTFmJhuqgaLTDp/JrbBqIvZAlCt1oNtSzzWV9xnqmLaRPVWuBHghxTvMl45Lelf3m9zTO60bKJEycZHtBqaBWAxU15RJBQhuCdJ1oYSYSJrWFnVSb9W1u5GtyvXcDMeYAUtAV344q74PvDZTLiZd7bgd65HEmTTm0p/ATA8+6gT ansible-generated on ro.chih.me",
    "state": "present",
    "uid": 1001
}
2019-01-29 20:21:07,818 p=24562 u=chih |   ____________________________________________________________ 
/ TASK [new_user : Set authorized_key to allow SSH key based \
\ logins]                                                    /
 ------------------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:07,820 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:16
2019-01-29 20:21:08,018 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/authorized_key.py
2019-01-29 20:21:10,287 p=24562 u=chih |  ok: [ro.chih.me] => {
    "changed": false,
    "comment": null,
    "exclusive": false,
    "follow": false,
    "invocation": {
        "module_args": {
            "comment": null,
            "exclusive": false,
            "follow": false,
            "key": "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvALPGv9Xdn2Tmi60DMcq1ACiLSYLQ6zfTHIM2x9k23IVVjTBBNEFfpcmxJBqaisojK89dK/GmQZ6qnKFKaI9DOvasI0aMLGc4gfeGE6HKcggq2DE3a6u9+qxuKsv86CexGzoJ6x9HIvCfCvm8Ru+U/ogJcOKWLtxW8kfBEcrydmsBUxVBR9TMTFKQS1JAHcmRrdYRPM3uolGkPXhpNzs47WHHfSg2NqXmMTsTEP5dkp4BikSPfhHsqjPqBuoBoRke+cdwxieZJGL+WgfE2pQYvtbFYfWWiZ11evKrug4EfiPl5pFotFUXX72Gk0CXHBjmUNhtNO4aU/oCKQ75ve0yw== qijiaxin758@gmail.com",
            "key_options": null,
            "keyfile": "/home/chih/.ssh/authorized_keys",
            "manage_dir": true,
            "path": null,
            "state": "present",
            "unique": false,
            "user": "chih",
            "validate_certs": true
        }
    },
    "key": "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvALPGv9Xdn2Tmi60DMcq1ACiLSYLQ6zfTHIM2x9k23IVVjTBBNEFfpcmxJBqaisojK89dK/GmQZ6qnKFKaI9DOvasI0aMLGc4gfeGE6HKcggq2DE3a6u9+qxuKsv86CexGzoJ6x9HIvCfCvm8Ru+U/ogJcOKWLtxW8kfBEcrydmsBUxVBR9TMTFKQS1JAHcmRrdYRPM3uolGkPXhpNzs47WHHfSg2NqXmMTsTEP5dkp4BikSPfhHsqjPqBuoBoRke+cdwxieZJGL+WgfE2pQYvtbFYfWWiZ11evKrug4EfiPl5pFotFUXX72Gk0CXHBjmUNhtNO4aU/oCKQ75ve0yw== qijiaxin758@gmail.com",
    "key_options": null,
    "keyfile": "/home/chih/.ssh/authorized_keys",
    "manage_dir": true,
    "path": null,
    "state": "present",
    "unique": false,
    "user": "chih",
    "validate_certs": true
}
2019-01-29 20:21:10,374 p=24562 u=chih |   __________________________________________________________ 
< TASK [new_user : Enable including files from sudoers.d/] >
 ---------------------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:10,375 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:22
2019-01-29 20:21:10,535 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/lineinfile.py
2019-01-29 20:21:13,380 p=24562 u=chih |  ok: [ro.chih.me] => {
    "backup": "",
    "changed": false,
    "diff": [
        {
            "after": "",
            "after_header": "/etc/sudoers (content)",
            "before": "",
            "before_header": "/etc/sudoers (content)"
        },
        {
            "after_header": "/etc/sudoers (file attributes)",
            "before_header": "/etc/sudoers (file attributes)"
        }
    ],
    "invocation": {
        "module_args": {
            "attributes": null,
            "backrefs": false,
            "backup": true,
            "content": null,
            "create": false,
            "delimiter": null,
            "directory_mode": null,
            "firstmatch": false,
            "follow": false,
            "force": null,
            "group": null,
            "insertafter": null,
            "insertbefore": null,
            "line": "#includedir /etc/sudoers.d",
            "mode": null,
            "owner": null,
            "path": "/etc/sudoers",
            "regexp": "^#includedir /etc/sudoers.d",
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": null,
            "state": "present",
            "unsafe_writes": null,
            "validate": null
        }
    },
    "msg": ""
}
2019-01-29 20:21:13,480 p=24562 u=chih |   _____________________________________ 
< TASK [new_user : Disable sudoers.d] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:13,480 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:31
2019-01-29 20:21:13,501 p=24562 u=chih |  skipping: [ro.chih.me] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
2019-01-29 20:21:13,550 p=24562 u=chih |   ____________________________________________ 
< TASK [new_user : Enable passwordless sudo] >
 -------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:13,551 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:40
2019-01-29 20:21:16,561 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/stat.py
2019-01-29 20:21:19,050 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/file.py
2019-01-29 20:21:23,072 p=24562 u=chih |  ok: [ro.chih.me] => {
    "changed": false,
    "checksum": "a72c95ff39a70dcc03be78c59e93bcd97273dce1",
    "dest": "/etc/sudoers.d/chih",
    "diff": {
        "after": {
            "path": "/etc/sudoers.d/chih"
        },
        "before": {
            "path": "/etc/sudoers.d/chih"
        }
    },
    "gid": 0,
    "group": "root",
    "invocation": {
        "module_args": {
            "_diff_peek": null,
            "_original_basename": "tmpwwail2y0",
            "access_time": null,
            "access_time_format": "%Y%m%d%H%M.%S",
            "attributes": null,
            "backup": null,
            "content": null,
            "delimiter": null,
            "dest": "/etc/sudoers.d/chih",
            "directory_mode": null,
            "follow": true,
            "force": false,
            "group": "root",
            "mode": "0440",
            "modification_time": null,
            "modification_time_format": "%Y%m%d%H%M.%S",
            "owner": "root",
            "path": "/etc/sudoers.d/chih",
            "recurse": false,
            "regexp": null,
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": null,
            "state": "file",
            "unsafe_writes": null
        }
    },
    "mode": "0440",
    "owner": "root",
    "path": "/etc/sudoers.d/chih",
    "size": 28,
    "state": "file",
    "uid": 0
}
2019-01-29 20:21:23,159 p=24562 u=chih |   ________________________________________________ 
< TASK [new_user : Backing up existing ~/.zshrc] >
 ------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:23,160 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:49
2019-01-29 20:21:23,310 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/commands/command.py
2019-01-29 20:21:25,303 p=24562 u=chih |  Escalation succeeded
2019-01-29 20:21:26,590 p=24562 u=chih |  changed: [ro.chih.me] => {
    "changed": true,
    "cmd": "if [ -f ~/.zshrc ]; then mv ~/.zshrc{,.orig}; fi",
    "delta": "0:00:00.002810",
    "end": "2019-01-29 12:21:25.908169",
    "invocation": {
        "module_args": {
            "_raw_params": "if [ -f ~/.zshrc ]; then mv ~/.zshrc{,.orig}; fi",
            "_uses_shell": true,
            "argv": null,
            "chdir": null,
            "creates": null,
            "executable": null,
            "removes": null,
            "stdin": null,
            "warn": true
        }
    },
    "rc": 0,
    "start": "2019-01-29 12:21:25.905359",
    "stderr": "",
    "stderr_lines": [],
    "stdout": "",
    "stdout_lines": []
}
2019-01-29 20:21:26,643 p=24562 u=chih |   _____________________________________ 
< TASK [new_user : Cloning oh-my-zsh] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:26,644 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:55
2019-01-29 20:21:26,808 p=24562 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/source_control/git.py
2019-01-29 20:21:27,998 p=24562 u=chih |  Escalation succeeded
2019-01-29 20:21:31,956 p=24562 u=chih |  ok: [ro.chih.me] => {
    "after": "ea6ec09b9c7752ee0e074659ca0689d0af053e5a",
    "before": "ea6ec09b9c7752ee0e074659ca0689d0af053e5a",
    "changed": false,
    "invocation": {
        "module_args": {
            "accept_hostkey": false,
            "archive": null,
            "bare": false,
            "clone": true,
            "depth": null,
            "dest": "/home/chih/.oh-my-zsh",
            "executable": null,
            "force": false,
            "key_file": null,
            "recursive": true,
            "reference": null,
            "refspec": null,
            "remote": "origin",
            "repo": "https://github.com/robbyrussell/oh-my-zsh",
            "separate_git_dir": null,
            "ssh_opts": null,
            "track_submodules": false,
            "umask": null,
            "update": true,
            "verify_commit": false,
            "version": "HEAD"
        }
    },
    "remote_url_changed": false
}
2019-01-29 20:21:32,054 p=24562 u=chih |   _________________________________________ 
< TASK [new_user : Creating new ~/.zshrc] >
 ----------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:32,054 p=24562 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:64
2019-01-29 20:21:34,936 p=24562 u=chih |  The full traceback is:
Traceback (most recent call last):
  File "/usr/lib/python3.7/site-packages/ansible/plugins/action/copy.py", line 457, in run
    source = self._find_needle('files', source)
  File "/usr/lib/python3.7/site-packages/ansible/plugins/action/__init__.py", line 1065, in _find_needle
    return self._loader.path_dwim_relative_stack(path_stack, dirname, needle)
  File "/usr/lib/python3.7/site-packages/ansible/parsing/dataloader.py", line 322, in path_dwim_relative_stack
    raise AnsibleFileNotFound(file_name=source, paths=[to_text(p) for p in search])
ansible.errors.AnsibleFileNotFound: Could not find or access '~/.oh-my-zsh/templates/zshrc.zsh-template' on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option

2019-01-29 20:21:34,937 p=24562 u=chih |  fatal: [ro.chih.me]: FAILED! => {
    "changed": false,
    "invocation": {
        "dest": "~/.zshrc",
        "src": "~/.oh-my-zsh/templates/zshrc.zsh-template"
    },
    "msg": "Could not find or access '~/.oh-my-zsh/templates/zshrc.zsh-template' on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"
}
2019-01-29 20:21:34,944 p=24562 u=chih |  	to retry, use: --limit @/tmp/new_machine.retry

2019-01-29 20:21:34,974 p=24562 u=chih |   ____________ 
< PLAY RECAP >
 ------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:21:34,975 p=24562 u=chih |  ro.chih.me                 : ok=7    changed=1    unreachable=0    failed=1   
2019-01-29 20:25:57,270 p=27807 u=chih |  ansible-playbook 2.7.6
  config file = /home/chih/Documents/new_machine_anbsible/ansible.cfg
  configured module search path = ['/home/chih/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.7.2 (default, Jan 10 2019, 23:51:51) [GCC 8.2.1 20181127]
2019-01-29 20:25:57,270 p=27807 u=chih |  Using /home/chih/Documents/new_machine_anbsible/ansible.cfg as config file
2019-01-29 20:25:57,283 p=27807 u=chih |  /home/chih/Documents/new_machine_anbsible/envs/ro/hosts did not meet host_list requirements, check plugin documentation if this is unexpected
2019-01-29 20:25:57,284 p=27807 u=chih |  /home/chih/Documents/new_machine_anbsible/envs/ro/hosts did not meet script requirements, check plugin documentation if this is unexpected
2019-01-29 20:25:57,289 p=27807 u=chih |  Parsed /home/chih/Documents/new_machine_anbsible/envs/ro/hosts inventory source with ini plugin
2019-01-29 20:25:57,591 p=27807 u=chih |   ____________________________ 
< PLAYBOOK: new_machine.yaml >
 ---------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:25:57,592 p=27807 u=chih |  1 plays in ./playbooks/new_machine.yaml
2019-01-29 20:25:57,639 p=27807 u=chih |   ________________________ 
< PLAY [Set New Machine] >
 ------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:25:57,646 p=27807 u=chih |  META: ran handlers
2019-01-29 20:25:57,683 p=27807 u=chih |   ______________________________________________ 
< TASK [base_packages : install base packages] >
 ---------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:25:57,684 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/base_packages/tasks/main.yaml:2
2019-01-29 20:25:57,968 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/setup.py
2019-01-29 20:26:07,279 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/packaging/os/yum.py
2019-01-29 20:26:09,785 p=27807 u=chih |  ok: [ro.chih.me] => {
    "ansible_facts": {
        "pkg_mgr": "yum"
    },
    "changed": false,
    "invocation": {
        "module_args": {
            "allow_downgrade": false,
            "autoremove": false,
            "bugfix": false,
            "conf_file": null,
            "disable_excludes": null,
            "disable_gpg_check": false,
            "disable_plugin": [],
            "disablerepo": [],
            "download_only": false,
            "enable_plugin": [],
            "enablerepo": [],
            "exclude": [],
            "install_repoquery": true,
            "installroot": "/",
            "list": null,
            "name": [
                "zsh",
                "vim",
                "git",
                "sudo"
            ],
            "releasever": null,
            "security": false,
            "skip_broken": false,
            "state": "present",
            "update_cache": false,
            "update_only": false,
            "use_backend": "auto",
            "validate_certs": true
        }
    },
    "msg": "",
    "rc": 0,
    "results": [
        "zsh-5.0.2-31.el7.x86_64 providing zsh is already installed",
        "2:vim-enhanced-7.4.160-5.el7.x86_64 providing vim is already installed",
        "git-1.8.3.1-20.el7.x86_64 providing git is already installed",
        "sudo-1.8.23-3.el7.x86_64 providing sudo is already installed"
    ]
}
2019-01-29 20:26:09,830 p=27807 u=chih |   ________________________________________ 
< TASK [new_user : Create user group(s)] >
 ---------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:09,830 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:3
2019-01-29 20:26:09,883 p=27807 u=chih |   _______________________________ 
< TASK [new_user : Create user] >
 ------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:09,884 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:9
2019-01-29 20:26:10,294 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/user.py
2019-01-29 20:26:12,472 p=27807 u=chih |  ok: [ro.chih.me] => {
    "append": false,
    "changed": false,
    "comment": "",
    "group": 1001,
    "groups": "",
    "home": "/home/chih",
    "invocation": {
        "module_args": {
            "append": false,
            "comment": null,
            "create_home": true,
            "expires": null,
            "force": false,
            "generate_ssh_key": true,
            "group": null,
            "groups": [
                ""
            ],
            "hidden": null,
            "home": null,
            "local": null,
            "login_class": null,
            "move_home": false,
            "name": "chih",
            "non_unique": false,
            "password": null,
            "password_lock": null,
            "remove": false,
            "seuser": null,
            "shell": "/bin/zsh",
            "skeleton": null,
            "ssh_key_bits": 0,
            "ssh_key_comment": "ansible-generated on ro.chih.me",
            "ssh_key_file": null,
            "ssh_key_passphrase": null,
            "ssh_key_type": "rsa",
            "state": "present",
            "system": false,
            "uid": null,
            "update_password": "always"
        }
    },
    "move_home": false,
    "name": "chih",
    "shell": "/bin/zsh",
    "ssh_fingerprint": "2048 SHA256:iB9yVlhdznBMmgtAlO3Z5+nJ8pV61ypdfN5CB32lHgY ansible-generated on ro.chih.me (RSA)",
    "ssh_key_file": "/home/chih/.ssh/id_rsa",
    "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDDuuW7C9eXcgP9pbCgo85+yzl0UI5jeh79ywB0rzy+tf4Aq7nJDzXCiqb4HyzP+sc/toDu8sGv2nIVK90VHQXYXbLNXcih8S/bwgghrWmjscuNd7yJaFEDPG1pEeQM/XZ+vV2qpCzHRO4bl6nvRW96I77ZAm6Cd46fYrh60gLkAKTFmJhuqgaLTDp/JrbBqIvZAlCt1oNtSzzWV9xnqmLaRPVWuBHghxTvMl45Lelf3m9zTO60bKJEycZHtBqaBWAxU15RJBQhuCdJ1oYSYSJrWFnVSb9W1u5GtyvXcDMeYAUtAV344q74PvDZTLiZd7bgd65HEmTTm0p/ATA8+6gT ansible-generated on ro.chih.me",
    "state": "present",
    "uid": 1001
}
2019-01-29 20:26:12,515 p=27807 u=chih |   ____________________________________________________________ 
/ TASK [new_user : Set authorized_key to allow SSH key based \
\ logins]                                                    /
 ------------------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:12,516 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:16
2019-01-29 20:26:12,688 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/system/authorized_key.py
2019-01-29 20:26:14,686 p=27807 u=chih |  ok: [ro.chih.me] => {
    "changed": false,
    "comment": null,
    "exclusive": false,
    "follow": false,
    "invocation": {
        "module_args": {
            "comment": null,
            "exclusive": false,
            "follow": false,
            "key": "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvALPGv9Xdn2Tmi60DMcq1ACiLSYLQ6zfTHIM2x9k23IVVjTBBNEFfpcmxJBqaisojK89dK/GmQZ6qnKFKaI9DOvasI0aMLGc4gfeGE6HKcggq2DE3a6u9+qxuKsv86CexGzoJ6x9HIvCfCvm8Ru+U/ogJcOKWLtxW8kfBEcrydmsBUxVBR9TMTFKQS1JAHcmRrdYRPM3uolGkPXhpNzs47WHHfSg2NqXmMTsTEP5dkp4BikSPfhHsqjPqBuoBoRke+cdwxieZJGL+WgfE2pQYvtbFYfWWiZ11evKrug4EfiPl5pFotFUXX72Gk0CXHBjmUNhtNO4aU/oCKQ75ve0yw== qijiaxin758@gmail.com",
            "key_options": null,
            "keyfile": "/home/chih/.ssh/authorized_keys",
            "manage_dir": true,
            "path": null,
            "state": "present",
            "unique": false,
            "user": "chih",
            "validate_certs": true
        }
    },
    "key": "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvALPGv9Xdn2Tmi60DMcq1ACiLSYLQ6zfTHIM2x9k23IVVjTBBNEFfpcmxJBqaisojK89dK/GmQZ6qnKFKaI9DOvasI0aMLGc4gfeGE6HKcggq2DE3a6u9+qxuKsv86CexGzoJ6x9HIvCfCvm8Ru+U/ogJcOKWLtxW8kfBEcrydmsBUxVBR9TMTFKQS1JAHcmRrdYRPM3uolGkPXhpNzs47WHHfSg2NqXmMTsTEP5dkp4BikSPfhHsqjPqBuoBoRke+cdwxieZJGL+WgfE2pQYvtbFYfWWiZ11evKrug4EfiPl5pFotFUXX72Gk0CXHBjmUNhtNO4aU/oCKQ75ve0yw== qijiaxin758@gmail.com",
    "key_options": null,
    "keyfile": "/home/chih/.ssh/authorized_keys",
    "manage_dir": true,
    "path": null,
    "state": "present",
    "unique": false,
    "user": "chih",
    "validate_certs": true
}
2019-01-29 20:26:14,722 p=27807 u=chih |   __________________________________________________________ 
< TASK [new_user : Enable including files from sudoers.d/] >
 ---------------------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:14,722 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:22
2019-01-29 20:26:14,886 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/lineinfile.py
2019-01-29 20:26:17,076 p=27807 u=chih |  ok: [ro.chih.me] => {
    "backup": "",
    "changed": false,
    "diff": [
        {
            "after": "",
            "after_header": "/etc/sudoers (content)",
            "before": "",
            "before_header": "/etc/sudoers (content)"
        },
        {
            "after_header": "/etc/sudoers (file attributes)",
            "before_header": "/etc/sudoers (file attributes)"
        }
    ],
    "invocation": {
        "module_args": {
            "attributes": null,
            "backrefs": false,
            "backup": true,
            "content": null,
            "create": false,
            "delimiter": null,
            "directory_mode": null,
            "firstmatch": false,
            "follow": false,
            "force": null,
            "group": null,
            "insertafter": null,
            "insertbefore": null,
            "line": "#includedir /etc/sudoers.d",
            "mode": null,
            "owner": null,
            "path": "/etc/sudoers",
            "regexp": "^#includedir /etc/sudoers.d",
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": null,
            "state": "present",
            "unsafe_writes": null,
            "validate": null
        }
    },
    "msg": ""
}
2019-01-29 20:26:17,155 p=27807 u=chih |   _____________________________________ 
< TASK [new_user : Disable sudoers.d] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:17,157 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:31
2019-01-29 20:26:17,197 p=27807 u=chih |  skipping: [ro.chih.me] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
2019-01-29 20:26:17,248 p=27807 u=chih |   ____________________________________________ 
< TASK [new_user : Enable passwordless sudo] >
 -------------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:17,249 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:40
2019-01-29 20:26:20,776 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/stat.py
2019-01-29 20:26:23,331 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/file.py
2019-01-29 20:26:27,227 p=27807 u=chih |  ok: [ro.chih.me] => {
    "changed": false,
    "checksum": "a72c95ff39a70dcc03be78c59e93bcd97273dce1",
    "dest": "/etc/sudoers.d/chih",
    "diff": {
        "after": {
            "path": "/etc/sudoers.d/chih"
        },
        "before": {
            "path": "/etc/sudoers.d/chih"
        }
    },
    "gid": 0,
    "group": "root",
    "invocation": {
        "module_args": {
            "_diff_peek": null,
            "_original_basename": "tmpqr2sbc9w",
            "access_time": null,
            "access_time_format": "%Y%m%d%H%M.%S",
            "attributes": null,
            "backup": null,
            "content": null,
            "delimiter": null,
            "dest": "/etc/sudoers.d/chih",
            "directory_mode": null,
            "follow": true,
            "force": false,
            "group": "root",
            "mode": "0440",
            "modification_time": null,
            "modification_time_format": "%Y%m%d%H%M.%S",
            "owner": "root",
            "path": "/etc/sudoers.d/chih",
            "recurse": false,
            "regexp": null,
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": null,
            "state": "file",
            "unsafe_writes": null
        }
    },
    "mode": "0440",
    "owner": "root",
    "path": "/etc/sudoers.d/chih",
    "size": 28,
    "state": "file",
    "uid": 0
}
2019-01-29 20:26:27,276 p=27807 u=chih |   ________________________________________________ 
< TASK [new_user : Backing up existing ~/.zshrc] >
 ------------------------------------------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:27,277 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:49
2019-01-29 20:26:27,428 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/commands/command.py
2019-01-29 20:26:28,935 p=27807 u=chih |  Escalation succeeded
2019-01-29 20:26:30,032 p=27807 u=chih |  changed: [ro.chih.me] => {
    "changed": true,
    "cmd": "if [ -f ~/.zshrc ]; then mv ~/.zshrc{,.orig}; fi",
    "delta": "0:00:00.002830",
    "end": "2019-01-29 12:26:29.558283",
    "invocation": {
        "module_args": {
            "_raw_params": "if [ -f ~/.zshrc ]; then mv ~/.zshrc{,.orig}; fi",
            "_uses_shell": true,
            "argv": null,
            "chdir": null,
            "creates": null,
            "executable": null,
            "removes": null,
            "stdin": null,
            "warn": true
        }
    },
    "rc": 0,
    "start": "2019-01-29 12:26:29.555453",
    "stderr": "",
    "stderr_lines": [],
    "stdout": "",
    "stdout_lines": []
}
2019-01-29 20:26:30,087 p=27807 u=chih |   _____________________________________ 
< TASK [new_user : Cloning oh-my-zsh] >
 ------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:30,088 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:55
2019-01-29 20:26:30,295 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/source_control/git.py
2019-01-29 20:26:31,691 p=27807 u=chih |  Escalation succeeded
2019-01-29 20:26:35,196 p=27807 u=chih |  ok: [ro.chih.me] => {
    "after": "ea6ec09b9c7752ee0e074659ca0689d0af053e5a",
    "before": "ea6ec09b9c7752ee0e074659ca0689d0af053e5a",
    "changed": false,
    "invocation": {
        "module_args": {
            "accept_hostkey": false,
            "archive": null,
            "bare": false,
            "clone": true,
            "depth": null,
            "dest": "/home/chih/.oh-my-zsh",
            "executable": null,
            "force": false,
            "key_file": null,
            "recursive": true,
            "reference": null,
            "refspec": null,
            "remote": "origin",
            "repo": "https://github.com/robbyrussell/oh-my-zsh",
            "separate_git_dir": null,
            "ssh_opts": null,
            "track_submodules": false,
            "umask": null,
            "update": true,
            "verify_commit": false,
            "version": "HEAD"
        }
    },
    "remote_url_changed": false
}
2019-01-29 20:26:35,234 p=27807 u=chih |   _________________________________________ 
< TASK [new_user : Creating new ~/.zshrc] >
 ----------------------------------------- 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:35,235 p=27807 u=chih |  task path: /home/chih/Documents/new_machine_anbsible/roles/new_user/tasks/main.yml:64
2019-01-29 20:26:38,565 p=27807 u=chih |  Using module file /usr/lib/python3.7/site-packages/ansible/modules/files/copy.py
2019-01-29 20:26:40,189 p=27807 u=chih |  Escalation succeeded
2019-01-29 20:26:41,263 p=27807 u=chih |  changed: [ro.chih.me] => {
    "changed": true,
    "checksum": "3f9cfe5d1622a83bc814e1b2647bf6b9e1a6a959",
    "dest": "/home/chih/.zshrc",
    "gid": 1001,
    "group": "chih",
    "invocation": {
        "module_args": {
            "_original_basename": null,
            "attributes": null,
            "backup": false,
            "checksum": null,
            "content": null,
            "delimiter": null,
            "dest": "/home/chih/.zshrc",
            "directory_mode": null,
            "follow": false,
            "force": true,
            "group": null,
            "local_follow": null,
            "mode": null,
            "owner": null,
            "regexp": null,
            "remote_src": true,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": "/home/chih/.oh-my-zsh/templates/zshrc.zsh-template",
            "unsafe_writes": null,
            "validate": null
        }
    },
    "md5sum": "9d53fba65118796fc9d9a08c6e1a2e28",
    "mode": "0644",
    "owner": "chih",
    "size": 3389,
    "src": "/home/chih/.oh-my-zsh/templates/zshrc.zsh-template",
    "state": "file",
    "uid": 1001
}
2019-01-29 20:26:41,267 p=27807 u=chih |  META: ran handlers
2019-01-29 20:26:41,268 p=27807 u=chih |  META: ran handlers
2019-01-29 20:26:41,325 p=27807 u=chih |   ____________ 
< PLAY RECAP >
 ------------ 
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||


2019-01-29 20:26:41,326 p=27807 u=chih |  ro.chih.me                 : ok=8    changed=2    unreachable=0    failed=0   
